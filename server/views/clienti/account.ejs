<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss/dist/tailwind.min.css">
</head>
<body class="bg-gray-100 h-screen font-sans">
  <%- include("../layout/navbar.ejs") %>
  
  <!-- Utente ruolo admin -->
  <% if (user.ruolo === 'admin') { %>
    <div class="flex">
      <div class="w-1/3 bg-white p-8 mx-auto mt-6">
        <h2 class="text-2xl font-medium mb-4">Modifica Account</h2>
        <form action="/update-user" method="post">
          <div class="mb-4">
            <label class="block font-medium mb-2" for="password">Password</label>
            <input class="border border-gray-400 p-2 w-full" type="password" name="password" id="password">
          </div>
          <div class="mb-4">
            <label class="block font-medium mb-2" for="address">Indirizzo</label>
            <input class="border border-gray-400 p-2 w-full" type="text" name="address" id="address" value="<%= user.indirizzo %>">
          </div>
          <div class="mb-4">
            <label class="block font-medium mb-2" for="civic_number">Numero Civico</label>
            <input class="border border-gray-400 p-2 w-full" type="text" name="civic_number" id="civic_number" value="<%= user.nCivico %>">
          </div>
          <div class="mb-4">
            <label class="block font-medium mb-2" for="phone_number">Numero di Telefono</label>
            <input class="border border-gray-400 p-2 w-full" type="text" name="phone_number" id="phone_number" value="<%= user.nTelefono %>">
          </div>
          <div class="mb-4">
            <label class="block font-medium mb-2" for="zip_code">CAP</label>
            <input class="border border-gray-400 p-2 w-full" type="text" name="zip_code" id="zip_code" value="<%= user.CAP %>">
          </div>
          <div class="mb-4">
            <label class="block font-medium mb-2" for="city">Città</label>
            <input class="border border-gray-400 p-2 w-full" type="text" name="city" id="city" value="<%= user.citta %>">
          </div>
          <div class="mb-4">
            <label class="block font-medium mb-2" for="province">Provincia</label>
            <input class="border border-gray-400 p-2 w-full" type="text" name="province" id="provincia">
            <div class="mb-4 mt-4">
              <input class="bg-red-500 hover:bg-red-600 text-white font-medium py-2 px-4 rounded" type="submit" value="Modifica Account">
            </div>
          </form>
          <form action="/delete-user" method="post">
            <input class="bg-red-500 hover:bg-red-600 text-white font-medium py-2 px-4 rounded" type="submit" value="Elimina Account">
          </form>
          <form action="/delete-user" method="post">
            <input class="bg-red-500 hover:bg-red-600 text-white font-medium py-2 px-4 mt-4 rounded" type="submit" value="Logout">
          </form>
        </div>

        <div class="w-1/3 bg-white p-8 ml-32">
          <h2 class="text-2xl font-medium mb-4">Modifica Ruolo Utente</h2>
          <form action="/update-role" method="post">
            <div class="mb-4">
              <label class="block font-medium mb-2" for="email">Email</label>
              <input class="border border-gray-400 p-2 w-full" type="email" name="email" id="email">
            </div>
            <div class="mb-4">
              <label class="block font-medium mb-2" for="role">Ruolo</label>
              <select class="border border-gray-400 p-2 w-full" name="role" id="role">
                <option value="user">User</option>
                <option value="admin">Admin</option>
              </select>
            </div>
            <div class="mb-4">
              <input class="bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded" type="submit" value="Modifica Ruolo">
            </div>
          </form>
        </div>
      </div>

      <!-- Utente ruolo user -->
    <% } else { %>
      <div class="flex">
        <div class="w-1/3 bg-white p-8 mx-auto mt-6 mb-6 shadow-xl">
          <h2 class="text-2xl font-medium mb-4">Modifica Account</h2>
          <form>
              <div class="mb-4">
                <label class="block font-medium mb-2" for="address">Indirizzo</label>
                <input class="border border-gray-400 p-2 w-full" type="text" name="address" id="address" value="<%= user.indirizzo %>">
              </div>
              <div class="mb-4">
                <label class="block font-medium mb-2" for="civic_number">Numero Civico</label>
                <input class="border border-gray-400 p-2 w-full" type="text" name="civic_number" id="civic_number" value="<%= user.nCivico %>">
              </div>
              <div class="mb-4">
                <label class="block font-medium mb-2" for="phone_number">Numero di Telefono</label>
                <input class="border border-gray-400 p-2 w-full" type="tel" name="phone_number" id="phone_number" value="<%= user.nTelefono %>">
              </div>
              <div class="mb-4">
                <label class="block font-medium mb-2" for="postal_code">CAP</label>
                <input class="border border-gray-400 p-2 w-full" type="text" name="postal_code" id="postal_code" value="<%= user.CAP %>">
              </div>
              <div class="mb-4">
                <label class="block font-medium mb-2" for="city">Città</label>
                <input class="border border-gray-400 p-2 w-full" type="text" name="city" id="city" value="<%= user.citta %>">
              </div>
              <div class="mb-4">
                <label class="block font-medium mb-2" for="province">Provincia</label>
                <input class="border border-gray-400 p-2 w-full" type="text" name="province" id="province" value="<%= user.provincia %>">
              </div>
              <div class="mb-4">
                <input class="bg-red-500 hover:bg-red-600 text-white font-medium py-2 px-4 rounded" type="submit" value="Modifica Account">
              </div>
            </form>
            <form>
              <input class="bg-red-500 hover:bg-red-600 text-white font-medium py-2 px-4 rounded" type="submit" value="Elimina Account">
            </form>
          </div>
        </div>
      <% } %>
    </div>
    <%- include("../layout/footer.ejs") %>
</body>
</html>